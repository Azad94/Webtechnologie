part of pacmanLib;

/**
 * the paths as const for the different graphics
 */
/**
 * enviornment resources
 */
const String wall = "background-image:url(../web/resc/enviornment/wall32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String door = "background-image:url(../web/resc/enviornment/door32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
/**
 * ghost normal state resources
 */
/**
 * Blinky
 */
const String blinky_r = "background-image:url(../web/resc/ghosts/blinky/blinky_r32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String blinky_l = "background-image:url(../web/resc/ghosts/blinky/blinky_l32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String blinky_u = "background-image:url(../web/resc/ghosts/blinky/blinky_t32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String blinky_d = "background-image:url(../web/resc/ghosts/blinky/blinky_d32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
/**
 * Pinky
 */
const String pinky_r = "background-image:url(../web/resc/ghosts/pinky/pinky_r32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String pinky_l = "background-image:url(../web/resc/ghosts/pinky/pinky_l32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String pinky_u = "background-image:url(../web/resc/ghosts/pinky/pinky_t32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String pinky_d = "background-image:url(../web/resc/ghosts/pinky/pinky_d32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
/**
 * Inky
 */
const String inky_r = "background-image:url(../web/resc/ghosts/inky/inky_r32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String inky_l = "background-image:url(../web/resc/ghosts/inky/inky_l32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String inky_u = "background-image:url(../web/resc/ghosts/inky/inky_t32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String inky_d = "background-image:url(../web/resc/ghosts/inky/inky_d32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
/**
 * Clyde
 */
const String clyde_r = "background-image:url(../web/resc/ghosts/clyde/clyde_r32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String clyde_l = "background-image:url(../web/resc/ghosts/clyde/clyde_l32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String clyde_u = "background-image:url(../web/resc/ghosts/clyde/clyde_t32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String clyde_d = "background-image:url(../web/resc/ghosts/clyde/clyde_d32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
/**
 * ghost scared state resources
 */
const String scared_r = "background-image:url(../web/resc/ghosts/scared/a_scaredghost_r.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String scared_l = "background-image:url(../web/resc/ghosts/scared/a_scaredghost_l.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String scared_u = "background-image:url(../web/resc/ghosts/scared/a_scaredghost_t.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String scared_d = "background-image:url(../web/resc/ghosts/scared/a_scaredghost_d.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
/**
 * Pacman normal state resources
 */
const String pacman_r = "background-image:url(../web/resc/pacman/pacman_r32.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String pacman_l = "background-image:url(../web/resc/pacman/pacman_l32.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String pacman_u = "background-image:url(../web/resc/pacman/pacman_u32.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String pacman_d = "background-image:url(../web/resc/pacman/pacman_d32.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
/**
 * pacman powerpill state resources
 */
const String p_pacman_r = "background-image:url(../web/resc/pacman/power_pacman_r32.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String p_pacman_l = "background-image:url(../web/resc/pacman/power_pacman_l32.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String p_pacman_u = "background-image:url(../web/resc/pacman/power_pacman_u32.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String p_pacman_d = "background-image:url(../web/resc/pacman/power_pacman_d32.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
/**
 * items resources
 */
const String pill = "background-image:url(../web/resc/items/pill32.png);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String powerpill = "background-image:url(../web/resc/items/a_powerpill32.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";
const String cherry = "background-image:url(../web/resc/items/a_cherry32.gif);background-repeat:no-repeat;background-size:32px 32px;   width: 32px; height: 32px;";


/**
 * A [PacmanGameView] object interacts with the DOM tree
 * to reflect actual [PacmanGame] state to the user
 */
class PacmanGameView {

  PacmanGameController _con;

  //the different div-classes from the html-document
  final _startScreen = querySelector(".start");
  final _message = querySelector(".messages");
  final _game = querySelector(".game");

  //different elements from the html-document
  final _startText = querySelector("#startText");
  final startButton = querySelector("#startButton");

  final _overlay = querySelector("#overlay");
  final _labyrinth = querySelector("#labyrinth");

  final _information = querySelector("#information");
  final _level = querySelector("#level");
  final _score = querySelector("#score");
  final _lives = querySelector("#lives");

  //constructor
  PacmanGameView(_con);

  //close start screen and show the gamefield
  void showGameview() {
    _startScreen.classes.toggle('close');
    _game.classes.toggle('show');
    _message.classes.toggle('show');
  }


  void updateEnvironmentMap() {

  }

  void updateDynamicMap() {

  }

  void updateItemMap() {

  }

  void updateGameStatus() {}

  //see _labyrinthToHTMLTable
  void initField(List<List<Types>> l) {
    _labyrinth.innerHtml = _labyrinthToHTMLTable(l);
  }
  //displays the current score
  void updateScore(int score) {
    _score.innerHtml = "Score: $score";
  }
  void updateLevel(int level){
    _level.innerHtml = "Level: $level";
  }
  void updateLives(int lives){
    _lives.innerHtml = "Lives: $lives";
  }
  void updateMessages(String str) {
    _message.innerHtml = "Msg: $str"; }

  void updateOverlay(String s) {
    _overlay.innerHtml = "<span> $s </span>";
  }
  //creates the table in the html-document
  String _labyrinthToHTMLTable(List<List<Types>> l) {

    String htmlTable = "<table>";
    for (List<Types> row in l) {
      htmlTable += "<tr>";

      for (Types s in row) {
          htmlTable += "<td></td>";
        }

      htmlTable += "</tr>";
    }
    return htmlTable += "</table>";
  }

  //loads the different game elements and their graphical representation into the table
  void _labyrinthFill(List<List<Types>> l) {

    var kl = _labyrinth.children[0].children[0];

    int _row = 0;
    int _col = 0;
    for (List<Types> row in l) {

      for (Types s in row) {

        switch(s) {
          case Types.WALL :
            kl.children[_row].children[_col].setAttribute("style", wall);
            break;
          case Types.DOOR :
            kl.children[_row].children[_col].setAttribute("style", door);
            break;
          case Types.BLINKY :
            kl.children[_row].children[_col].setAttribute("style", blinky_r);
            break;
          case Types.PINKY :
            kl.children[_row].children[_col].setAttribute("style", pinky_r);
            break;
          case Types.INKY :
            kl.children[_row].children[_col].setAttribute("style", inky_r);
            break;
          case Types.CLYDE :
            kl.children[_row].children[_col].setAttribute("style", clyde_r);
            break;
          case Types.PACMAN_RIGHT :
            kl.children[_row].children[_col].setAttribute("style", pacman_r);
            break;
          case Types.PACMAN_LEFT :
            kl.children[_row].children[_col].setAttribute("style", pacman_l);
            break;
          case Types.PACMAN_UP :
            kl.children[_row].children[_col].setAttribute("style", pacman_u);
            break;
          case Types.PACMAN_DOWN :
            kl.children[_row].children[_col].setAttribute("style", pacman_d);
            break;
          case Types.PILL :
            kl.children[_row].children[_col].setAttribute("style", pill);
            break;
          case Types.POWERPILL :
            kl.children[_row].children[_col].setAttribute("style", powerpill);
            break;
          case Types.CHERRY :
            kl.children[_row].children[_col].setAttribute("style", cherry);
            break;
          case Types.NOTHING :
            kl.children[_row].children[_col].setAttribute("style", "");
            break;
          default:
            break;
        }
        _col++;
      }
      _col = 0;
      _row++;
    }
  }

}
